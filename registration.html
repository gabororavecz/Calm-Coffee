<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Hungarian Paprika Restaurant</title>
  <!-- materialize icons, css & js -->
  <link type="text/css" href="/css/materialize.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link type="text/css" href="/css/styles.css" rel="stylesheet">
  <script type="text/javascript" src="/js/materialize.min.js"></script>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="img/png" sizes="32x32" href="img/lattte.png">
  <!-- ios support -->
  <link rel="apple-touch-icon" href="/img/icons/halaszle-96x96.png">
  <meta name="apple-mobile-web-app-status-bar" content="#FFE1C4">
  <meta name="theme-color" content="#FFE1C4">
  <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
  <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
</head>

<body>
<form name="registration_form" action="#" method="post" enctype="multipart/form-data">
    <!-- <label for="name">Name:</label>
    <input type="text" id="name" name="name" required> -->
  
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" class="form-control" required>
  
    <label for="password">Password:</label>
    <input type="password" id="password" name="password" class="form-control"  required>
  
    <!-- <label for="confirm-password">Confirm Password:</label>
    <input type="password" id="confirm-password" name="confirm-password" class="validate" required> -->

    <!-- <label for="gender">Gender:</label>
    <br>
    <p>
      <label>
        <input name="group1" type="radio" />
        <span>Male</span>
      </label>
    </p>
    <p>
      <label>
        <input class="with-gap" name="group1" type="radio" />
        <span>Female</span>
      </label>
    </p>
    <br>
    <label for="age">Age:</label>
    <div class="range-field">
      <input type="range" min="0" max="120" value="50" oninput="rangeValue.innerText = this.value">
      <b id="rangeValue">50</b>
      </div>
    <br> -->
    <br>
    <button type="button" id="register" name="register" class="btn btn-success">Register</button>
  </form>

  <script src="/js/app.js"></script>
  <!-- <script src="/js/db.js"></script>  for firebase database later on for next part of assigment -->
  <script src="/js/ui.js"></script>
</body>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics.js";
  // import { getAuth, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCE-ZAKU8gCF6LA_drUzaIar5nc6EGPcN8",
    authDomain: "gaborweb-auth.firebaseapp.com",
    databaseURL: "https://gaborweb-auth-default-rtdb.firebaseio.com",
    projectId: "gaborweb-auth",
    storageBucket: "gaborweb-auth.appspot.com",
    messagingSenderId: "350924013300",
    appId: "1:350924013300:web:394e7e5106ae58d692e8a1",
    measurementId: "G-8KGCVBHST1"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

    

     const auth = getAuth();

  //   signInWithCustomToken(auth, token)
  // .then((userCredential) => {
  //   // Signed in
  //   const user = userCredential.user;
  //   // ...
  // })
  // .catch((error) => {
  //   const errorCode = error.code;
  //   const errorMessage = error.message;
  //   // ...
  // });

      // Initialize Firebase;
  // const auth = getAuth(app);

  // const submitButton = document.getElementById("submit");
  // const signupButton = document.getElementById("sign-up");
  // const emailInput = document.getElementById("email");
  // const passwordInput = document.getElementById("password");
  // const main = document.getElementById("main");
  // const createacct = document.getElementById("create-acct")
  
  // const signupEmailIn = document.getElementById("email-signup");
  // const confirmSignupEmailIn = document.getElementById("confirm-email-signup");
  // const signupPasswordIn = document.getElementById("password-signup");
  // const confirmSignUpPasswordIn = document.getElementById("confirm-password-signup");
  // const createacctbtn = document.getElementById("create-acct-btn");
  
  // const returnBtn = document.getElementById("return-btn");
  
  // var email, password, signupEmail, signupPassword, confirmSignupEmail, confirmSignUpPassword;
  
  // createacctbtn.addEventListener("click", function() {
  //   var isVerified = true;
  
  //   signupEmail = signupEmailIn.value;
  //   confirmSignupEmail = confirmSignupEmailIn.value;
  //   if(signupEmail != confirmSignupEmail) {
  //       window.alert("Email fields do not match. Try again.")
  //       isVerified = false;
  //   }
  
  //   signupPassword = signupPasswordIn.value;
  //   confirmSignUpPassword = confirmSignUpPasswordIn.value;
  //   if(signupPassword != confirmSignUpPassword) {
  //       window.alert("Password fields do not match. Try again.")
  //       isVerified = false;
  //   }
    
  //   if(signupEmail == null || confirmSignupEmail == null || signupPassword == null || confirmSignUpPassword == null) {
  //     window.alert("Please fill out all required fields.");
  //     isVerified = false;
  //   }
    
  //   if(isVerified) {
  //     createUserWithEmailAndPassword(auth, signupEmail, signupPassword)
  //       .then((userCredential) => {
  //       // Signed in 
  //       const user = userCredential.user;
  //       // ...
  //       window.alert("Success! Account created.");
  //     })
  //     .catch((error) => {
  //       const errorCode = error.code;
  //       const errorMessage = error.message;
  //       // ..
  //       window.alert("Error occurred. Try again.");
  //     });
  //   }
  // });
  
  // submitButton.addEventListener("click", function() {
  //   email = emailInput.value;
  //   console.log(email);
  //   password = passwordInput.value;
  //   console.log(password);
  
  //   signInWithEmailAndPassword(auth, email, password)
  //     .then((userCredential) => {
  //       // Signed in
  //       const user = userCredential.user;
  //       console.log("Success! Welcome back!");
  //       window.alert("Success! Welcome back!");
  //       // ...
  //     })
  //     .catch((error) => {
  //       const errorCode = error.code;
  //       const errorMessage = error.message;
  //       console.log("Error occurred. Try again.");
  //       window.alert("Error occurred. Try again.");
  //     });
  // });
  
  // signupButton.addEventListener("click", function() {
  //     main.style.display = "none";
  //     createacct.style.display = "block";
  // });
  
  // returnBtn.addEventListener("click", function() {
  //     main.style.display = "block";
  //     createacct.style.display = "none";
  // });

  //   console.log(app);

    

    //----- New Registration code start	  
  document.getElementById("register").addEventListener("click", function() {
		  var email =  document.getElementById("email").value;
		  var password = document.getElementById("password").value;
		  //For new registration
		  createUserWithEmailAndPassword(auth, email, password)
		  .then((userCredential) => {
		    // Signed in 
		    const user = userCredential.user;
		    console.log(user);
		    alert("Registration successfully!!");
        window.location.href = 'index.html';
		    // ...
		  })
		  .catch((error) => {
		    const errorCode = error.code;
		    const errorMessage = error.message;
		    // ..
		    console.log(errorMessage);
		    alert(error);
		  });		  		  
	  });
	  // ----- End

	  // //----- Login code start	  
	  // document.getElementById("login").addEventListener("click", function() {
		//   var email =  document.getElementById("login_email").value;
		//   var password = document.getElementById("login_password").value;

		//   signInWithEmailAndPassword(auth, email, password)
		//   .then((userCredential) => {
		//     // Signed in 
		//     const user = userCredential.user;
		//     console.log(user);
		//     alert(user.email+" Login successfully!!!");
		//     document.getElementById('logout').style.display = 'block';
		//     // ...
		//   })
		//   .catch((error) => {
		//     const errorCode = error.code;
		//     const errorMessage = error.message;
		//     console.log(errorMessage);
		//     alert(errorMessage);
		//   });		  		  
	  // });
	  // //----- End

	  // //----- Logout code start	  
	  // document.getElementById("logout").addEventListener("click", function() {
		//   signOut(auth).then(() => {
		// 	  // Sign-out successful.
		// 	  console.log('Sign-out successful.');
		// 	  alert('Sign-out successful.');
		// 	  document.getElementById('logout').style.display = 'none';
		// 	}).catch((error) => {
		// 	  // An error happened.
		// 	  console.log('An error happened.');
		// 	});		  		  
	  // });
	  // // ----- End

</script>
</body>
</html>